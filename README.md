DIServer Framework
=======================

## Note 20151205
一开始上传这个框架的时候，我其实已经在项目中用了一段时间了，所以肯定是可用的，但因为工作原因，很多时候为了赶进度，有些地方总觉得做得并不理想（例如ThinkPHP面向web网站开发的特性导致很多冗余的代码被加载的），总想着上传以后，把这些小地方改完善了，在加入使用的方法，结果发现，一方面最近工作实在太忙，感觉人的精力实在兼顾不来；另一方面，在调整的过程中发现问题越改越多，想法纷纷扰扰，拔剑四顾心茫然。
饭要一口口吃，事情要一点点做，感觉自己还是有很多的不足希望改进。以前做项目的时候总被老板批说不出产品，老想着把东西做完善了再交，客户不等人的。

不知道github上会不会这样，这个框架对我而言，还有特别的意义，我还是会继续往下做好它的。

计划要做的事情：

+ 加入DI控制，正在研究Laravel的Container工具和.Net的SimpleIOC，但不打算把整个Laravel引进来，也不打算把功能做的那么强大，过度灵活的松耦合对于一个目的明确的框架而言，我认为是一种过度设计，我不希望把这个框架做得太臃肿，也不需要它太强大，它只要能快速的解决核心的问题即可，提供合适的基础功能以后，更多的自由度交给使用者（其实我正在做）。
+ 另外我不打算把它做成能支持http等应用层协议的框架，所以类似路、View由等东西，我会着手砍掉。
+ 目前我的理解和期望是，允许你来制定应用层协议（当然，我会提出一些约定，不可能满足所有人的口味，我更倾向于专注于别的地方）。当然，在这个基础上，有需要的可以自己改进。

希望这样可以改善整个程序的耦合性。
希望这不是过度设计。

## 简介

+ 一个由swoole_server提供网络服务，ThinkPHP提供ORM等其它工具的TCP/UDP网络服务框架。
+ 这个文档暂时没写完，Demo还在整理中，暂时来说这个东西还不算能用。
+ 我会尝试整理出[wiki](https://github.com/szyhf/DIServer-Framework/wiki)

## 特性

- 使用了swoole扩展实现网络通讯，改进过的ThinkPHP作为服务支持；
- 若已有过ThinkPHP的使用基础，可以快速上手。

## 环境

- php5.6+ 
- Swoole1.7.20-stable（目前确定可用）
- linux（确定可用的是CentOS和Ubuntu，其他的没测过）
- (option) Apache（改造未破坏ThinkPHP本身的功能，仍然可以用作Web服务）

## 安装

- [PHP](https://github.com/php/php-src)
- [Swoole扩展](https://github.com/swoole/swoole-src)

## 其它

- [ThinkPHP3.2.3](https://github.com/liu21st/thinkphp)
- 因为原生的ThinkPHP是面向Web开发的，需要进行一些改造才能适应常驻服务的特性，请使用我提供的ThinkPHP版本。

## 说明

DIServer是我在具体项目中，根据自身需求和一些遇到的问题整理出来的框架。

- 这个框架试图或者尝试解决以下问题：
- 一个便于设置和使用的网络服务框架，使得使用者可以更加专注的关注业务问题。
- 基于ThinkPHP提供的服务支持，使用户可以使用更简便的方法完成诸如数据库、缓存等常用服务的使用。

为了达到这个目的，我做了以下努力：

1. 快速建立一个或多个网络服务，各个服务可以同时监听一个或TCP\UDP的端口。
1. 建立一个一般性流程用于完成服务的配置、启动、重载、关闭等工作。
1. 一个一般性的流程用于管理、处理、反馈用户请求。
1. 可以通过配置文件控制服务的某些特性。
1. 提供一个默认的通讯协议和对应的解析方式，并允许用户根据自己需要重载协议。
1. 通过对ThinkPHP的修改，使之可以比较好的支持cli模式下，常驻服务的特性（如数据库的长连接）。
1. 可以与ThinkPHP本身Web功能共存，同一套配置（例如数据库配置）同时用于http服务和TCP\UDP服务。
1. 一些便利的管理脚本。
1. 以框架标准扩展的形式提供一些常用工具基础实现方案（如心跳帧），可根据业务需求自行改造。

## 样例

### Server的配置

```php
//还没写。。

```
#### 简单的服务开启方式
```php
vi YourServer.php

<?php
\define('DI_SERVER_NAME', 'YourServer');
\define('APP_PATH', "$YourApplicationPath");
//就酱，DIServer框架会自动创建目录
require_once '{$DIServerPath}\DIServer.php';
```
##### 在Shell中执行
```shell
php YourServer.php
```

## 开源许可
Apache License Version 2.0http://www.apache.org/licenses/LICENSE-2.0.html
